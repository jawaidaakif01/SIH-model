<%- include('partials/header') %>

<div class="container">
  <div class="result-wrapper">
    <h1 class="result-title">Report Result</h1>

    <div class="result-grid">
      <section class="result-card submitted-card" aria-labelledby="submitted-data">
        <h2 id="submitted-data">Submitted Data</h2>
        <div class="data-list">
          <div class="data-row"><div class="data-label">Season</div><div class="data-val"><%= report.season %></div></div>
          <div class="data-row"><div class="data-label">Water Source</div><div class="data-val"><%= report.waterSource %></div></div>
          <div class="data-row"><div class="data-label">pH</div><div class="data-val"><%= report.ph %></div></div>
          <div class="data-row"><div class="data-label">Turbidity (NTU)</div><div class="data-val"><%= report.turbidity %></div></div>
          <div class="data-row"><div class="data-label">TDS (ppm)</div><div class="data-val"><%= report.tds %></div></div>
          <div class="data-row"><div class="data-label">Total Coliform</div><div class="data-val"><%= report.totalColiform %></div></div>
          <div class="data-row"><div class="data-label">Arsenic (Âµg/L)</div><div class="data-val"><%= report.arsenic %></div></div>
          <div class="data-row"><div class="data-label">Nitrate (mg/L)</div><div class="data-val"><%= report.nitrate %></div></div>
          <div class="data-row"><div class="data-label">Age Group</div><div class="data-val"><%= report.ageGroup %></div></div>
          <div class="data-row"><div class="data-label">Gender</div><div class="data-val"><%= report.gender %></div></div>
        </div>
      </section>

      <aside class="result-card prediction-card" aria-labelledby="ml-predictions">
        <h2 id="ml-predictions">ML Predictions</h2>
        <% if (report.predictedDisease || report.predictedSeverity) { %>
          <div class="prediction">
            <div class="prediction-item">
              <div class="prediction-label">Disease</div>
              <div class="prediction-value"><%= report.predictedDisease || 'N/A' %></div>
            </div>
            <div class="prediction-item">
              <div class="prediction-label">Severity</div>
              <% const sev = (report.predictedSeverity || '').toLowerCase(); %>
              <div class="badge <%= sev.includes('mild') ? 'severity-mild' : (sev.includes('moderate') ? 'severity-moderate' : (sev.includes('severe') ? 'severity-severe' : 'severity-unknown')) %>"><%= report.predictedSeverity || 'N/A' %></div>
            </div>
          </div>
        <% } else { %>
          <p class="muted">No prediction available at this time. The report has been saved and may be processed shortly.</p>
        <% } %>

        <div class="actions">
          <a class="btn btn-blue" href="/user-dashboard">Back to Dashboard</a>
        </div>
      </aside>
    </div>
  </div>
</div>

<%- include('partials/footer') %>
